<div class="form-group" [formGroup]="filterForm">
  <label for="">Filter Customers</label>
  <input
    type="text"
    class="form-control"
    aria-describedby="helpId"
    placeholder=""
    formControlName="filter"
  />
  <small id="helpId" class="form-text text-muted"
    >filter matches full name</small
  >
</div>
<div class="d-flex flex-fill" *ngIf="customers$ | async as customers">
  <table class="table table-striped w-50">
    <thead class="thead-inverse">
      <tr>
        <th class="clickable" (click)="sort('FirstName')">
          First Name
          <fa-icon [icon]="downArrow" *ngIf="column === 'FirstName'"></fa-icon>
        </th>
        <th class="clickable" (click)="sort('LastName')">
          Last Name
          <fa-icon [icon]="downArrow" *ngIf="column === 'LastName'"></fa-icon>
        </th>
        <th>
          <nav aria-label="Page navigation">
            <ul class="pagination m-0 p-0">
              <li class="page-item small" [ngClass]="{ disabled: page <= 1 }">
                <button
                  class="page-link"
                  (click)="changePage(page - 1)"
                  aria-label="Previous"
                >
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">Previous</span>
                </button>
              </li>

              <li
                class="page-item small"
                [ngClass]="{ disabled: customers.length < pageSize }"
              >
                <button
                  class="page-link"
                  (click)="changePage(page + 1)"
                  aria-label="Next"
                >
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Next</span>
                </button>
              </li>
            </ul>
          </nav>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of customers">
        <td scope="row">{{ customer.firstName }}</td>
        <td>{{ customer.lastName }}</td>
        <td>
          <button type="button" class="btn btn-sm btn-primary" (click)="select(customer)">Edit</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="w-50 p-5">
    <ng-container *ngIf="selectedCustomer$ | async as selectedCustomer; else noCustomerSelected">
      <div class="card">
        <div class="card-header">
          Edit Customer
        </div>
        <div class="card-body">
          {{ selectedCustomer.firstName }} {{ selectedCustomer.lastName }}
        </div>
        <div class="card-footer text-muted">
          <button class="btn btn-success">Save</button>
        </div>
      </div>
    </ng-container>
    <ng-template #noCustomerSelected>
      <div class="jumbotron">
        <h5>Select 'Edit' to make updates to a customer.</h5>
      </div>
    </ng-template>
  </div>
</div>
